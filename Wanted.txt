{$CLEO .cs}
{$INCLUDE Common/CleoConstants.txt}
0000:
thread 'WANTED'
int year
int travel_var
int wanted
while true
    wait 0
    0AB4: year = var CDATE
    0AB4: travel_var = var TRAVEL
    year /= 10000
        01C0: wanted = player $PLAYER_CHAR wanted_level
gosub @check    
    if
        year >= 2010
    then
        01F0: set_max_wanted_level_to 6
    else if
        year >= 1980
    then
        01F0: set_max_wanted_level_to 4
    else if
        year >= 1910
    then
        01F0: set_max_wanted_level_to 2
    else
        01F0: set_max_wanted_level_to 0
    end
    end
    end
    if and
        travel_var == 0
        Player.WantedLevel($PLAYER_CHAR) > 1
        not Player.WantedLevel($PLAYER_CHAR) > 2
    then
        if
            year >= 2010
        then
            Player.WantedLevel($PLAYER_CHAR) = 5
        else if
            year >= 1980
        then
            Player.WantedLevel($PLAYER_CHAR) = 4
        end
        end
    end
end

:check
wait 0
if
wanted == 0
then
05DF: write_memory 0x5591B7 size 1 value 1 virtual_protect 1
else
if
wanted == 1
then
05DF: write_memory 0x5591B7 size 1 value 2 virtual_protect 1
else
if
wanted == 2
then
05DF: write_memory 0x5591B7 size 1 value 3 virtual_protect 1
else
if
wanted == 3
then
05DF: write_memory 0x5591B7 size 1 value 4 virtual_protect 1
else
if
wanted == 4
then
05DF: write_memory 0x5591B7 size 1 value 5 virtual_protect 1
else
if or
wanted == 5
wanted == 6
then
05DF: write_memory 0x5591B7 size 1 value 6 virtual_protect 1
end
end
end
end
end
end
return  
