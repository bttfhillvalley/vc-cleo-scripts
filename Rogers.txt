{$CLEO .s}
{$INCLUDE Common/CleoConstants.txt}
{$INCLUDE Rogers/Include/Variables.txt}

0000:
gosub @Setup
while true
    wait 10
    if
        Car.Wrecked(vehicle)
    then
        3F91: stop_sound "jvt/steam.wav" index vehicle
        Car.RemoveReferences(vehicle)
        terminate_this_custom_script
    end

    // 1 - LF
    // 2 - LR
    // 3 - RF
    // 4 - RR
    3F0E: store_car vehicle wheel_rotation wheel_lf wheel_lb wheel_rf wheel_rb
    wheel_rb = wheel_lb
    wheel_rb += 90.0
    3F1E: set_car vehicle wheel_rotation wheel_lf wheel_lb wheel_rf wheel_rb
    gosub @Sounds

    cleo_call @Tender 1 vehicle
    cleo_call @Wheels 5 vehicle wheel_lb wheel_rb wheel_lf wheel_rf
    cleo_call @WheelRods 3 vehicle wheel_lb wheel_rb
    cleo_call @PistonRods 4 vehicle wheel_lb wheel_rb 8.5
    cleo_call @Valve 3 vehicle wheel_lb wheel_rb
    cleo_call @PistonSteam 1 vehicle
    cleo_call @SmokeStack 2 vehicle particle_type
    gosub @Presto
end

:Setup
3F10: set_car vehicle component "smokestack_dam" visible 0
3F86: attach_sound "jvt/steam.wav" to_car vehicle pos 0.0 0.0 0.0 loop 1 size 30.0
stream_custom_script "Rogers/Cylinder.s" vehicle
stream_custom_script "Rogers/Bell.s" vehicle
stream_custom_script "Rogers/Horn.s" vehicle
//stream_custom_script "Rogers/Attach.s" vehicle
Car.SetImmunities(vehicle, 0, 0, 0, 1, 1)
053F: set_car vehicle tires_vulnerable 0
return

{$INCLUDE Rogers/Include/Animations.txt}
{$INCLUDE Rogers/Include/Effects.txt}
{$INCLUDE Rogers/Include/Presto.txt}
{$INCLUDE Rogers/Include/Sounds.txt}
{$INCLUDE Rogers/Include/SpeedOffset.txt}