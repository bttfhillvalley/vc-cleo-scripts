{$CLEO .s}
0000:
thread 'rubish'

// In some .cs script, just launch a bunch of scripts for each pickup
// i.e. stream_custom_script 'Pickup.s' PEPSI_MODEL_1985 1000.0 1000.0 10.0 19700101 20100101
{$INCLUDE Common/CleoConstants.txt}
int randomgen
int rubish1
int rubish2
int rubish3
int start_date
int end_date
int current_date

:PickupStart
wait 0
0AB4: current_date = var CDATE
// Wait until we are in the correct date range before creating pickup
if and
    current_date >= start_date
    current_date < end_date
else_jump @PickupStart
if
    randomgen == 0 //normal
then
    3F0B: replace_tex "particle" "newspaper01_64" with "particle" "newspaper01_64" index rubish1
    3F0B: replace_tex "particle" "gameleaf01_64" with "particle" "gameleaf01_64" index rubish2
    3F0B: replace_tex "particle" "gameleaf02_64" with "particle" "gameleaf02_64" index rubish3
else
if
    randomgen == 1 //1985
then
    0209: rubish1 = random_int_in_ranges 1 6
    0209: rubish2 = random_int_in_ranges 1 6 //do not condense this (needed for multiple colors)
    0209: rubish3 = random_int_in_ranges 4 6
    3F0B: replace_tex "particle" "newspaper01_64" with "particle" "newspaper01_64" index rubish1
    3F0B: replace_tex "particle" "gameleaf01_64" with "particle" "gameleaf01_64" index rubish2
    3F0B: replace_tex "particle" "gameleaf02_64" with "particle" "gameleaf02_64" index rubish3
else
if
    randomgen == 2  //2015
then
    0209: rubish3 = random_int_in_ranges 2 4
    3F0B: replace_tex "particle" "newspaper01_64" with "particle" "newspaper01_64" index rubish1
    3F0B: replace_tex "particle" "gameleaf01_64" with "particle" "gameleaf01_64" index rubish2
    3F0B: replace_tex "particle" "gameleaf02_64" with "particle" "gameleaf02_64" index rubish3
end
end
end
wait 1000
else_jump @PickupStart

:PickupCheck
wait 0
0AB4: current_date = var CDATE
// Destroy pickup when we're outside the date range
if or
    current_date < start_date
    current_date >= end_date
else_jump @PickupCheck
wait 0
jump @PickupStart